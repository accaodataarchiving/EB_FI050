sap.ui.define(["sap/ui/model/Filter","sap/m/MessageToast"],function(e,t){"use strict";var o;return{onInit:function(){sap.ui.getCore().getConfiguration().getFormatSettings().setDatePattern("short","dd-MM-YYYY")},DownloadComprovantes:function(e,r){sap.ui.core.BusyIndicator.show();var a="";let n=this.extensionAPI.getSelectedContexts();var i="";if(n.length===0){sap.ui.core.BusyIndicator.hide();var s=o.getView().getModel("i18n").getResourceBundle().getText("msg03");t.show(s);return}for(let e=0;e<n.length;e++){const t=n[e];if(i!==""){i+=","}a=a.concat(t.getProperty("Belnr"),t.getProperty("Bukrs"),t.getProperty("Gjahr"))}o=this;var l=this.getOwnerComponent().getModel();this.getView().setModel(l,"oModel");var g=e.getSource().getParent().getParent().getSelectedItems();var u=new sap.ui.model.Filter({path:"Iddoc",operator:sap.ui.model.FilterOperator.EQ,value1:a});l.read("/AnexosSet",{filters:[u],success:function(e,r){var a=new sap.ui.model.json.JSONModel({Result:e.results});if(e.results.length==0){var n=o.getView().getModel("i18n").getResourceBundle().getText("msg01");t.show(n)}o.getView().setModel(a,"AnexosList");sap.ui.core.BusyIndicator.hide()},error:function(e){sap.ui.core.BusyIndicator.hide()}});this.pDialog??=this.loadFragment({name:"br.com.eldoradobrasil.fi050.fi050.fragments.Comprovantes"});this.pDialog.then(e=>e.open())},onDownload:function(e){var r=e.getSource();var a=r.getProperty("description");const n=a.split("/");var i=this.getOwnerComponent().getModel();var s="";s=s.concat(i.sServiceUrl,"/AnexosSet(Iddoc='",n[0],"',LoObjid='",n[1],"')/$value");window.open(s);var l=o.getView().getModel("i18n").getResourceBundle().getText("msg02");t.show(l)},onCloseDialog(){this.byId("DownloadComprovantesDialog").close()},onInitSmartFilterBarExtension:function(e){var t;var o;t=sap.ushell.Container.getService("UserInfo").getEmail();o=sap.ui.getCore().getConfiguration().getLanguage();if(t==null){t="felipe.goes@accao.com.br"}if(o==null){t="P"}else if(o=="en"){o="E"}else{o="P"}var r=e.getSource();var a=new Date;var n=new Date(a.setMonth(a.getMonth()-3));var a=new Date;var i={Dtvencimento:{ranges:[{exclude:false,operation:"BT",keyField:"Dtvencimento",value1:n,value2:a}]},PortalUser:{ranges:[{exclude:false,operation:"EQ",keyField:"PortalUser",value1:t,value2:""}]},Language:{ranges:[{exclude:false,operation:"EQ",keyField:"Language",value1:o,value2:""}]}};r.setFilterData(i);r.determineFilterItemByName("Dtvencimento").setVisibleInFilterBar(true);r.determineFilterItemByName("Status").setVisibleInFilterBar(true);r.determineFilterItemByName("PortalUser").setVisibleInFilterBar(false);r.determineFilterItemByName("Language").setVisibleInFilterBar(false)},onBeforeRebindTableExtension:function(e){var t=this.getView().getModel("i18n").getResourceBundle().getText("footerText");var o={message:t,type:sap.ui.core.MessageType.Warning};this.extensionAPI.setCustomMessage(o)}}});
//# sourceMappingURL=ListReportExt.controller.js.map