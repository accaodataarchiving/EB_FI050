sap.ui.define(["sap/ui/model/Filter","sap/m/MessageToast"],function(e,t){"use strict";var o;return{onInit:function(){sap.ui.getCore().getConfiguration().getFormatSettings().setDatePattern("short","dd-MM-YYYY")},DownloadComprovantes:function(e,r){sap.ui.core.BusyIndicator.show();var n="";let s=this.extensionAPI.getSelectedContexts();var a="";if(s.length===0){sap.ui.core.BusyIndicator.hide();var i=o.getView().getModel("i18n").getResourceBundle().getText("msg03");t.show(i);return}for(let e=0;e<s.length;e++){const t=s[e];if(a!==""){a+=","}n=n.concat(t.getProperty("Augbl"),t.getProperty("Bukrs"),t.getProperty("Gjahr"))}o=this;var l=this.getOwnerComponent().getModel();this.getView().setModel(l,"oModel");var g=e.getSource().getParent().getParent().getSelectedItems();var u=new sap.ui.model.Filter({path:"Iddoc",operator:sap.ui.model.FilterOperator.EQ,value1:n});l.read("/AnexosSet",{filters:[u],success:function(e,r){var n=new sap.ui.model.json.JSONModel({Result:e.results});if(e.results.length==0){var s=o.getView().getModel("i18n").getResourceBundle().getText("msg01");t.show(s)}o.getView().setModel(n,"AnexosList");sap.ui.core.BusyIndicator.hide()},error:function(e){sap.ui.core.BusyIndicator.hide()}});this.pDialog??=this.loadFragment({name:"br.com.eldoradobrasil.fi050.fi050.fragments.Comprovantes"});this.pDialog.then(e=>e.open())},onDownload:function(e){var r=e.getSource();var n=r.getProperty("description");const s=n.split("/");var a=this.getOwnerComponent().getModel();var i="";i=i.concat(a.sServiceUrl,"/AnexosSet(Iddoc='",s[0],"',LoObjid='",s[1],"')/$value");window.open(i);var l=o.getView().getModel("i18n").getResourceBundle().getText("msg02");t.show(l)},onCloseDialog(){this.byId("DownloadComprovantesDialog").close()},onInitSmartFilterBarExtension:function(e){var t;t=sap.ushell.Container.getService("UserInfo").getEmail();var o=e.getSource();var r=new Date;var n=new Date(r.setMonth(r.getMonth()-3));var r=new Date;var s={Dtvencimento:{ranges:[{exclude:false,operation:"BT",keyField:"Dtvencimento",value1:n,value2:r}]},PortalUser:{ranges:[{exclude:false,operation:"EQ",keyField:"PortalUser",value1:t,value2:""}]}};o.setFilterData(s);o.determineFilterItemByName("Dtvencimento").setVisibleInFilterBar(true);o.determineFilterItemByName("PortalUser").setVisibleInFilterBar(false)},onBeforeRebindTableExtension:function(e){var t=this.getView().getModel("i18n").getResourceBundle().getText("footerText");var o={message:t,type:sap.ui.core.MessageType.Warning};this.extensionAPI.setCustomMessage(o)}}});
//# sourceMappingURL=ListReportExt.controller.js.map